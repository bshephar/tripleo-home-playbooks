step_1:
  memcached:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-memcached:current-tripleo
    net: host
    privileged: false
    restart: always
    start_order: 0
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/memcached.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/memcached:/var/lib/kolla/config_files/src:rw,z
    - /var/log/containers/memcached:/var/log/memcached:rw
  mysql_bootstrap:
    command:
    - bash
    - -ec
    - 'if [ -e /var/lib/mysql/mysql ]; then exit 0; fi

      echo -e "\n[mysqld]\nwsrep_provider=none" >> /etc/my.cnf

      kolla_set_configs

      sudo -u mysql -E kolla_extend_start

      timeout ${DB_MAX_TIMEOUT} /bin/bash -c ''while pgrep -af /usr/bin/mysqld_safe
      | grep -q -v grep; do sleep 1; done''

      mysqld_safe --skip-networking --wsrep-on=OFF &

      timeout ${DB_MAX_TIMEOUT} /bin/bash -c ''until mysqladmin -uroot -p"${DB_ROOT_PASSWORD}"
      ping 2>/dev/null; do sleep 1; done''

      mysql -uroot -p"${DB_ROOT_PASSWORD}" -e "CREATE USER ''clustercheck''@''localhost''
      IDENTIFIED BY ''${DB_CLUSTERCHECK_PASSWORD}'';"

      mysql -uroot -p"${DB_ROOT_PASSWORD}" -e "GRANT PROCESS ON *.* TO ''clustercheck''@''localhost''
      WITH GRANT OPTION;"

      mysql -uroot -p"${DB_ROOT_PASSWORD}" -e "DELETE FROM mysql.user WHERE user =
      ''root'' AND host NOT IN (''%'',''localhost'');"

      timeout ${DB_MAX_TIMEOUT} mysqladmin -uroot -p"${DB_ROOT_PASSWORD}" shutdown'
    detach: false
    environment:
      DB_CLUSTERCHECK_PASSWORD: aeQXuIn9ap7B8o6gla4HpBmrK
      DB_MAX_TIMEOUT: 60
      DB_ROOT_PASSWORD: 2nASGaGKnN
      KOLLA_BOOTSTRAP: true
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-mariadb:current-tripleo
    net: host
    start_order: 1
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:rw,z
    - /var/lib/config-data/puppet-generated/mysql:/var/lib/kolla/config_files/src:ro,z
    - /var/lib/mysql:/var/lib/mysql:rw,z
  mysql_data_ownership:
    command:
    - chown
    - -R
    - 'mysql:'
    - /var/lib/mysql
    detach: false
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-mariadb:current-tripleo
    net: host
    start_order: 0
    user: root
    volumes:
    - /var/lib/mysql:/var/lib/mysql:z
  rabbitmq_bootstrap:
    environment:
      KOLLA_BOOTSTRAP: true
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
      RABBITMQ_CLUSTER_COOKIE: pkfHIvq4mdPSYc173Anc
      TRIPLEO_DEPLOY_IDENTIFIER: '1657008430'
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-rabbitmq:current-tripleo
    net: host
    privileged: false
    start_order: 0
    volumes:
    - /var/lib/kolla/config_files/rabbitmq.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/rabbitmq:/var/lib/kolla/config_files/src:ro
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /var/lib/rabbitmq:/var/lib/rabbitmq:z
  redis:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-redis:current-tripleo
    net: host
    privileged: false
    restart: always
    start_order: 1
    stop_grace_period: 60
    volumes:
    - /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/redis:/var/lib/kolla/config_files/src:ro
    - /etc/localtime:/etc/localtime:ro
    - /var/log/containers/redis:/var/log/redis:z
    - /run/redis:/run/redis:z
  redis_init_logs:
    command:
    - /bin/bash
    - -c
    - chown -R redis:redis /var/log/redis
    detach: false
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-redis:current-tripleo
    net: none
    privileged: false
    start_order: 0
    user: root
    volumes:
    - /var/log/containers/redis:/var/log/redis:z
step_2:
  cinder_api_init_logs:
    command:
    - /bin/bash
    - -c
    - chown -R cinder:cinder /var/log/cinder
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-cinder-api:current-tripleo
    net: none
    privileged: false
    user: root
    volumes:
    - /var/log/containers/cinder:/var/log/cinder:z
    - /var/log/containers/httpd/cinder-api:/var/log/httpd:z
  cinder_scheduler_init_logs:
    command:
    - /bin/bash
    - -c
    - chown -R cinder:cinder /var/log/cinder
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-cinder-scheduler:current-tripleo
    net: none
    privileged: false
    user: root
    volumes:
    - /var/log/containers/cinder:/var/log/cinder:z
  clustercheck:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-mariadb:current-tripleo
    net: host
    restart: always
    start_order: 1
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/clustercheck.json:/var/lib/kolla/config_files/config.json
    - /var/lib/config-data/puppet-generated/clustercheck:/var/lib/kolla/config_files/src:ro
    - /var/lib/mysql:/var/lib/mysql
  create_haproxy_wrapper:
    command:
    - /container_puppet_apply.sh
    - '4'
    - file
    - include ::tripleo::profile::base::neutron::ovn_metadata_agent_wrappers
    detach: false
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-neutron-metadata-agent-ovn:current-tripleo
    net: host
    pid: host
    start_order: 1
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /var/lib/container-config-scripts/container_puppet_apply.sh:/container_puppet_apply.sh:ro
    - /etc/puppet:/tmp/puppet-etc:ro
    - /usr/share/openstack-puppet/modules:/usr/share/openstack-puppet/modules:ro
    - /run/openvswitch:/run/openvswitch:shared,z
    - /var/lib/neutron:/var/lib/neutron:shared,z
  create_virtlogd_wrapper:
    cgroupns: host
    command:
    - /container_puppet_apply.sh
    - '4'
    - file
    - include ::tripleo::profile::base::nova::virtlogd_wrapper
    detach: false
    environment:
      TRIPLEO_DEPLOY_IDENTIFIER: '1657008430'
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-nova-libvirt:current-tripleo
    net: host
    pid: host
    start_order: 1
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /var/lib/container-config-scripts/container_puppet_apply.sh:/container_puppet_apply.sh:ro
    - /etc/puppet:/tmp/puppet-etc:ro
    - /usr/share/openstack-puppet/modules:/usr/share/openstack-puppet/modules:ro
    - /var/lib/container-config-scripts:/var/lib/container-config-scripts:shared,z
  glance_init_logs:
    command:
    - /bin/bash
    - -c
    - chown -R glance:glance /var/log/glance
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-glance-api:current-tripleo
    net: none
    privileged: false
    user: root
    volumes:
    - /var/log/containers/glance:/var/log/glance:z
    - /var/log/containers/httpd/glance:/var/log/httpd:z
  heat_init_log:
    command:
    - /bin/bash
    - -c
    - chown -R heat:heat /var/log/heat
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-heat-engine:current-tripleo
    net: none
    user: root
    volumes:
    - /var/log/containers/heat:/var/log/heat:z
  horizon_fix_perms:
    command:
    - /bin/bash
    - -c
    - touch /var/log/horizon/horizon.log ; chown -R apache:apache /var/log/horizon
      && chmod -R a+rx /etc/openstack-dashboard
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-horizon:current-tripleo
    net: none
    user: root
    volumes:
    - /var/log/containers/horizon:/var/log/horizon:z
    - /var/log/containers/httpd/horizon:/var/log/httpd:z
    - /var/lib/config-data/puppet-generated/horizon/etc/openstack-dashboard:/etc/openstack-dashboard
  keystone_init_log:
    command:
    - /bin/bash
    - -c
    - chown -R keystone:keystone /var/log/keystone
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-keystone:current-tripleo
    net: none
    start_order: 1
    user: root
    volumes:
    - /var/log/containers/keystone:/var/log/keystone:z
    - /var/log/containers/httpd/keystone:/var/log/httpd:z
  mysql_wait_bundle:
    command:
    - /container_puppet_apply.sh
    - '2'
    - file,file_line,concat,augeas,galera_ready,mysql_database,mysql_grant,mysql_user
    - include tripleo::profile::pacemaker::database::mysql_bundle
    detach: false
    environment:
      TRIPLEO_DEPLOY_IDENTIFIER: '1657008430'
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-mariadb:current-tripleo
    ipc: host
    net: host
    start_order: 0
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /var/lib/container-config-scripts/container_puppet_apply.sh:/container_puppet_apply.sh:ro
    - /etc/puppet:/tmp/puppet-etc:ro
    - /usr/share/openstack-puppet/modules:/usr/share/openstack-puppet/modules:ro
    - /var/lib/mysql:/var/lib/mysql:rw,z
    - /var/lib/config-data/puppet-generated/mysql/root:/root:rw
  neutron_init_logs:
    command:
    - /bin/bash
    - -c
    - chown -R neutron:neutron /var/log/neutron
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-neutron-server:current-tripleo
    net: none
    privileged: false
    user: root
    volumes:
    - /var/log/containers/neutron:/var/log/neutron:z
    - /var/log/containers/httpd/neutron-api:/var/log/httpd:z
  nova_api_init_logs:
    command:
    - /bin/bash
    - -c
    - chown -R nova:nova /var/log/nova
    environment:
      TRIPLEO_DEPLOY_IDENTIFIER: '1657008430'
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-nova-api:current-tripleo
    net: none
    privileged: false
    user: root
    volumes:
    - /var/log/containers/nova:/var/log/nova:z
    - /var/log/containers/httpd/nova-api:/var/log/httpd:z
  nova_compute_init_log:
    command:
    - /bin/bash
    - -c
    - chown -R nova:nova /var/log/nova
    environment:
      TRIPLEO_DEPLOY_IDENTIFIER: '1657008430'
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-nova-compute:current-tripleo
    net: none
    privileged: false
    user: root
    volumes:
    - /var/log/containers/nova:/var/log/nova:z
  nova_conductor_init_log:
    command:
    - /bin/bash
    - -c
    - chown -R nova:nova /var/log/nova
    environment:
      TRIPLEO_DEPLOY_IDENTIFIER: '1657008430'
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-nova-conductor:current-tripleo
    net: none
    privileged: false
    user: root
    volumes:
    - /var/log/containers/nova:/var/log/nova:z
  nova_metadata_init_logs:
    command:
    - /bin/bash
    - -c
    - chown -R nova:nova /var/log/nova
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-nova-api:current-tripleo
    net: none
    privileged: false
    user: root
    volumes:
    - /var/log/containers/nova:/var/log/nova:z
    - /var/log/containers/httpd/nova-metadata:/var/log/httpd:z
  octavia_api_init_dirs:
    command:
    - /bin/bash
    - -c
    - mkdir -p /etc/octavia/conf.d/octavia-api; chown -R octavia:octavia /etc/octavia/conf.d/octavia-api;
      chown -R octavia:octavia /var/log/octavia
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-octavia-api:current-tripleo
    net: none
    start_order: 0
    user: root
    volumes:
    - /var/lib/config-data/puppet-generated/octavia/etc/octavia:/etc/octavia
    - /var/log/containers/octavia:/var/log/octavia:z
    - /var/log/containers/httpd/octavia-api:/var/log/httpd:z
  octavia_health_manager_init_dirs:
    command:
    - /bin/bash
    - -c
    - mkdir -p /etc/octavia/conf.d/octavia-health-manager; chown -R octavia:octavia
      /etc/octavia/conf.d/octavia-health-manager
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-octavia-health-manager:current-tripleo
    net: none
    start_order: 0
    user: root
    volumes:
    - /var/lib/config-data/puppet-generated/octavia/etc/octavia:/etc/octavia:z
  octavia_housekeeping_init_dirs:
    command:
    - /bin/bash
    - -c
    - mkdir -p /etc/octavia/conf.d/octavia-housekeeping; chown -R octavia:octavia
      /etc/octavia/conf.d/octavia-housekeeping
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-octavia-housekeeping:current-tripleo
    net: none
    start_order: 0
    user: root
    volumes:
    - /var/lib/config-data/puppet-generated/octavia/etc/octavia:/etc/octavia:z
  octavia_worker_init_dirs:
    command:
    - /bin/bash
    - -c
    - mkdir -p /etc/octavia/conf.d/octavia-worker; chown -R octavia:octavia /etc/octavia/conf.d/octavia-worker
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-octavia-worker:current-tripleo
    net: none
    start_order: 0
    user: root
    volumes:
    - /var/lib/config-data/puppet-generated/octavia/etc/octavia:/etc/octavia:z
  placement_init_log:
    command:
    - /bin/bash
    - -c
    - chown -R placement:placement /var/log/placement
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-placement-api:current-tripleo
    net: none
    start_order: 1
    user: root
    volumes:
    - /var/log/containers/placement:/var/log/placement:z
    - /var/log/containers/httpd/placement:/var/log/httpd:z
  rabbitmq_wait_bundle:
    command:
    - /container_puppet_apply.sh
    - '2'
    - file,file_line,concat,augeas,rabbitmq_policy,rabbitmq_user,rabbitmq_ready
    - include tripleo::profile::pacemaker::rabbitmq_bundle
    detach: false
    environment:
      KOLLA_BOOTSTRAP: true
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
      RABBITMQ_CLUSTER_COOKIE: pkfHIvq4mdPSYc173Anc
      TRIPLEO_DEPLOY_IDENTIFIER: '1657008430'
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-rabbitmq:current-tripleo
    ipc: host
    net: host
    start_order: 0
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /var/lib/container-config-scripts/container_puppet_apply.sh:/container_puppet_apply.sh:ro
    - /etc/puppet:/tmp/puppet-etc:ro
    - /usr/share/openstack-puppet/modules:/usr/share/openstack-puppet/modules:ro
    - /bin/true:/bin/epmd
step_3:
  cinder_api_db_sync:
    detach: false
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
      TRIPLEO_DEPLOY_IDENTIFIER: '1657008430'
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-cinder-api:current-tripleo
    net: host
    privileged: false
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/cinder_api_db_sync.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/cinder:/var/lib/kolla/config_files/src:ro
    - /var/log/containers/cinder:/var/log/cinder:z
  cinder_volume_init_logs:
    command:
    - /bin/bash
    - -c
    - chown -R cinder:cinder /var/log/cinder
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-cinder-volume:current-tripleo
    net: none
    privileged: false
    start_order: 0
    user: root
    volumes:
    - /var/log/containers/cinder:/var/log/cinder
  glance_api_db_sync:
    command: /usr/bin/bootstrap_host_exec glance_api su glance -s /bin/bash -c '/usr/local/bin/kolla_start'
    detach: false
    environment:
      KOLLA_BOOTSTRAP: true
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
      TRIPLEO_DEPLOY_IDENTIFIER: '1657008430'
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-glance-api:current-tripleo
    net: host
    privileged: false
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/glance:/var/log/glance:z
    - /var/log/containers/httpd/glance:/var/log/httpd:z
    - /var/lib/kolla/config_files/glance_api.json:/var/lib/kolla/config_files/config.json
    - /var/lib/config-data/puppet-generated/glance_api:/var/lib/kolla/config_files/src:ro
    - /var/lib/tripleo-config/ceph:/var/lib/kolla/config_files/src-ceph:ro
    - /var/lib/config-data/puppet-generated/iscsid/etc/iscsi:/var/lib/kolla/config_files/src-iscsid:ro
    - /var/lib/glance:/var/lib/glance:slave
  heat_engine_db_sync:
    detach: false
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
      TRIPLEO_DEPLOY_IDENTIFIER: '1657008430'
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-heat-engine:current-tripleo
    net: host
    privileged: false
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/heat:/var/log/heat:z
    - /var/lib/kolla/config_files/heat_engine_db_sync.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/heat:/var/lib/kolla/config_files/src:ro
  horizon:
    environment:
      ENABLE_DESIGNATE: 'yes'
      ENABLE_HEAT: 'yes'
      ENABLE_IRONIC: 'yes'
      ENABLE_MANILA: 'yes'
      ENABLE_OCTAVIA: 'yes'
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-horizon:current-tripleo
    net: host
    privileged: false
    restart: always
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/horizon.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/horizon:/var/lib/kolla/config_files/src:ro
    - /var/log/containers/horizon:/var/log/horizon:z
    - /var/log/containers/httpd/horizon:/var/log/httpd:z
    - /var/tmp/horizon:/var/tmp:z
    - /var/www:/var/www:ro
  iscsid:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-iscsid:current-tripleo
    net: host
    privileged: true
    restart: always
    start_order: 2
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/iscsid.json:/var/lib/kolla/config_files/config.json:ro
    - /dev:/dev
    - /run:/run
    - /sys:/sys
    - /lib/modules:/lib/modules:ro
    - /var/lib/config-data/puppet-generated/iscsid/etc/iscsi:/var/lib/kolla/config_files/src-iscsid:ro
    - /etc/target:/etc/target:z
    - /var/lib/iscsi:/var/lib/iscsi:z
  neutron_db_sync:
    detach: false
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
      TRIPLEO_DEPLOY_IDENTIFIER: '1657008430'
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-neutron-server:current-tripleo
    net: host
    privileged: false
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/neutron:/var/log/neutron:z
    - /var/log/containers/httpd/neutron-api:/var/log/httpd:z
    - /var/lib/kolla/config_files/neutron_api_db_sync.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/neutron:/var/lib/kolla/config_files/src:ro
  nova_api_db_sync:
    detach: false
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
      TRIPLEO_DEPLOY_IDENTIFIER: '1657008430'
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-nova-api:current-tripleo
    net: host
    start_order: 0
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/nova:/var/log/nova:z
    - /var/log/containers/httpd/nova-api:/var/log/httpd:z
    - /var/lib/kolla/config_files/nova_api_db_sync.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/nova:/var/lib/kolla/config_files/src:ro
  nova_api_ensure_default_cells:
    detach: false
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-nova-api:current-tripleo
    net: host
    start_order: 1
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/nova:/var/log/nova:z
    - /var/log/containers/httpd/nova-api:/var/log/httpd:z
    - /var/lib/kolla/config_files/nova_api_ensure_default_cells.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/nova:/var/lib/kolla/config_files/src:ro
    - /var/lib/container-config-scripts/nova_api_ensure_default_cells.sh:/nova_api_ensure_default_cells.sh:ro
  nova_db_sync:
    detach: false
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
      TRIPLEO_DEPLOY_IDENTIFIER: '1657008430'
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-nova-conductor:current-tripleo
    net: host
    start_order: 3
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/nova:/var/log/nova
    - /var/lib/kolla/config_files/nova_conductor_db_sync.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/nova:/var/lib/kolla/config_files/src:ro
  nova_statedir_owner:
    command: /container-config-scripts/pyshim.sh /container-config-scripts/nova_statedir_ownership.py
    detach: false
    environment:
      NOVA_STATEDIR_OWNERSHIP_SKIP: triliovault-mounts
      TRIPLEO_DEPLOY_IDENTIFIER: '1657008430'
      __OS_DEBUG: 'false'
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-nova-compute:current-tripleo
    net: none
    privileged: false
    security_opt:
    - label=disable
    user: root
    volumes:
    - /var/lib/nova:/var/lib/nova:shared
    - /var/lib/_nova_secontext:/var/lib/_nova_secontext:shared,z
    - /var/lib/container-config-scripts:/container-config-scripts:z
  nova_virtlogd_wrapper:
    cgroupns: host
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-nova-libvirt:current-tripleo
    net: host
    pid: host
    privileged: true
    restart: always
    security_opt:
    - label=disable
    start_order: 0
    ulimit:
    - nofile=131072
    - nproc=126960
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/libvirt:/var/log/libvirt:shared,z
    - /lib/modules:/lib/modules:ro
    - /dev:/dev
    - /run:/run
    - /sys/fs/cgroup:/sys/fs/cgroup
    - /sys/fs/selinux:/sys/fs/selinux
    - /etc/selinux/config:/etc/selinux/config:ro
    - /etc/libvirt:/etc/libvirt:shared
    - /etc/ssh/ssh_known_hosts:/etc/ssh/ssh_known_hosts:ro
    - /run/libvirt:/run/libvirt:shared
    - /var/lib/nova:/var/lib/nova:shared
    - /var/lib/libvirt:/var/lib/libvirt:shared
    - /var/cache/libvirt:/var/cache/libvirt:shared
    - /var/lib/vhost_sockets:/var/lib/vhost_sockets
    - /var/lib/config-data/puppet-generated/nova_libvirt:/var/lib/kolla/config_files/src:ro
    - /var/lib/tripleo-config/ceph:/var/lib/kolla/config_files/src-ceph:ro
    - /var/lib/kolla/config_files/nova_virtlogd.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/container-config-scripts/virtlogd_wrapper:/usr/local/bin/virtlogd_wrapper:ro
  nova_virtnodedevd:
    cgroupns: host
    depends_on:
    - tripleo_nova_virtlogd_wrapper.service
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-nova-libvirt:current-tripleo
    net: host
    pid: host
    pids_limit: 65536
    privileged: true
    restart: always
    security_opt:
    - label=level:s0
    - label=type:spc_t
    - label=filetype:container_share_t
    start_order: 2
    ulimit:
    - nofile=131072
    - nproc=126960
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/libvirt:/var/log/libvirt:shared,z
    - /lib/modules:/lib/modules:ro
    - /dev:/dev
    - /run:/run
    - /sys/fs/cgroup:/sys/fs/cgroup
    - /sys/fs/selinux:/sys/fs/selinux
    - /etc/selinux/config:/etc/selinux/config:ro
    - /etc/libvirt:/etc/libvirt:shared
    - /etc/ssh/ssh_known_hosts:/etc/ssh/ssh_known_hosts:ro
    - /run/libvirt:/run/libvirt:shared
    - /var/lib/nova:/var/lib/nova:shared
    - /var/lib/libvirt:/var/lib/libvirt:shared
    - /var/cache/libvirt:/var/cache/libvirt:shared
    - /var/lib/vhost_sockets:/var/lib/vhost_sockets
    - /var/lib/config-data/puppet-generated/nova_libvirt:/var/lib/kolla/config_files/src:ro
    - /var/lib/tripleo-config/ceph:/var/lib/kolla/config_files/src-ceph:ro
    - /var/lib/kolla/config_files/nova_virtnodedevd.json:/var/lib/kolla/config_files/config.json:ro
  nova_virtproxyd:
    cgroupns: host
    depends_on:
    - tripleo_nova_virtlogd_wrapper.service
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-nova-libvirt:current-tripleo
    net: host
    pid: host
    pids_limit: 65536
    privileged: true
    restart: always
    security_opt:
    - label=level:s0
    - label=type:spc_t
    - label=filetype:container_share_t
    start_order: 5
    ulimit:
    - nofile=131072
    - nproc=126960
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/libvirt:/var/log/libvirt:shared,z
    - /lib/modules:/lib/modules:ro
    - /dev:/dev
    - /run:/run
    - /sys/fs/cgroup:/sys/fs/cgroup
    - /sys/fs/selinux:/sys/fs/selinux
    - /etc/selinux/config:/etc/selinux/config:ro
    - /etc/libvirt:/etc/libvirt:shared
    - /etc/ssh/ssh_known_hosts:/etc/ssh/ssh_known_hosts:ro
    - /run/libvirt:/run/libvirt:shared
    - /var/lib/nova:/var/lib/nova:shared
    - /var/lib/libvirt:/var/lib/libvirt:shared
    - /var/cache/libvirt:/var/cache/libvirt:shared
    - /var/lib/vhost_sockets:/var/lib/vhost_sockets
    - /var/lib/config-data/puppet-generated/nova_libvirt:/var/lib/kolla/config_files/src:ro
    - /var/lib/tripleo-config/ceph:/var/lib/kolla/config_files/src-ceph:ro
    - /var/lib/kolla/config_files/nova_virtproxyd.json:/var/lib/kolla/config_files/config.json:ro
  nova_virtqemud:
    cgroupns: host
    depends_on:
    - tripleo_nova_virtlogd_wrapper.service
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-nova-libvirt:current-tripleo
    net: host
    pid: host
    pids_limit: 65536
    privileged: true
    restart: always
    security_opt:
    - label=level:s0
    - label=type:spc_t
    - label=filetype:container_share_t
    start_order: 4
    ulimit:
    - nofile=131072
    - nproc=126960
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/libvirt:/var/log/libvirt:shared,z
    - /lib/modules:/lib/modules:ro
    - /dev:/dev
    - /run:/run
    - /sys/fs/cgroup:/sys/fs/cgroup
    - /sys/fs/selinux:/sys/fs/selinux
    - /etc/selinux/config:/etc/selinux/config:ro
    - /etc/libvirt:/etc/libvirt:shared
    - /etc/ssh/ssh_known_hosts:/etc/ssh/ssh_known_hosts:ro
    - /run/libvirt:/run/libvirt:shared
    - /var/lib/nova:/var/lib/nova:shared
    - /var/lib/libvirt:/var/lib/libvirt:shared
    - /var/cache/libvirt:/var/cache/libvirt:shared
    - /var/lib/vhost_sockets:/var/lib/vhost_sockets
    - /var/lib/config-data/puppet-generated/nova_libvirt:/var/lib/kolla/config_files/src:ro
    - /var/lib/tripleo-config/ceph:/var/lib/kolla/config_files/src-ceph:ro
    - /var/lib/kolla/config_files/nova_virtqemud.json:/var/lib/kolla/config_files/config.json:ro
  nova_virtsecretd:
    cgroupns: host
    depends_on:
    - tripleo_nova_virtlogd_wrapper.service
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-nova-libvirt:current-tripleo
    net: host
    pid: host
    pids_limit: 65536
    privileged: true
    restart: always
    security_opt:
    - label=level:s0
    - label=type:spc_t
    - label=filetype:container_share_t
    start_order: 1
    ulimit:
    - nofile=131072
    - nproc=126960
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/libvirt:/var/log/libvirt:shared,z
    - /lib/modules:/lib/modules:ro
    - /dev:/dev
    - /run:/run
    - /sys/fs/cgroup:/sys/fs/cgroup
    - /sys/fs/selinux:/sys/fs/selinux
    - /etc/selinux/config:/etc/selinux/config:ro
    - /etc/libvirt:/etc/libvirt:shared
    - /etc/ssh/ssh_known_hosts:/etc/ssh/ssh_known_hosts:ro
    - /run/libvirt:/run/libvirt:shared
    - /var/lib/nova:/var/lib/nova:shared
    - /var/lib/libvirt:/var/lib/libvirt:shared
    - /var/cache/libvirt:/var/cache/libvirt:shared
    - /var/lib/vhost_sockets:/var/lib/vhost_sockets
    - /var/lib/config-data/puppet-generated/nova_libvirt:/var/lib/kolla/config_files/src:ro
    - /var/lib/tripleo-config/ceph:/var/lib/kolla/config_files/src-ceph:ro
    - /var/lib/kolla/config_files/nova_virtsecretd.json:/var/lib/kolla/config_files/config.json:ro
  nova_virtstoraged:
    cgroupns: host
    depends_on:
    - tripleo_nova_virtlogd_wrapper.service
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-nova-libvirt:current-tripleo
    net: host
    pid: host
    pids_limit: 65536
    privileged: true
    restart: always
    security_opt:
    - label=level:s0
    - label=type:spc_t
    - label=filetype:container_share_t
    start_order: 3
    ulimit:
    - nofile=131072
    - nproc=126960
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/libvirt:/var/log/libvirt:shared,z
    - /lib/modules:/lib/modules:ro
    - /dev:/dev
    - /run:/run
    - /sys/fs/cgroup:/sys/fs/cgroup
    - /sys/fs/selinux:/sys/fs/selinux
    - /etc/selinux/config:/etc/selinux/config:ro
    - /etc/libvirt:/etc/libvirt:shared
    - /etc/ssh/ssh_known_hosts:/etc/ssh/ssh_known_hosts:ro
    - /run/libvirt:/run/libvirt:shared
    - /var/lib/nova:/var/lib/nova:shared
    - /var/lib/libvirt:/var/lib/libvirt:shared
    - /var/cache/libvirt:/var/cache/libvirt:shared
    - /var/lib/vhost_sockets:/var/lib/vhost_sockets
    - /var/lib/config-data/puppet-generated/nova_libvirt:/var/lib/kolla/config_files/src:ro
    - /var/lib/tripleo-config/ceph:/var/lib/kolla/config_files/src-ceph:ro
    - /var/lib/kolla/config_files/nova_virtstoraged.json:/var/lib/kolla/config_files/config.json:ro
  octavia_db_sync:
    detach: false
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
      TRIPLEO_DEPLOY_IDENTIFIER: '1657008430'
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-octavia-api:current-tripleo
    net: host
    privileged: false
    start_order: 0
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/octavia_api_db_sync.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/octavia:/var/lib/kolla/config_files/src:ro
    - /var/log/containers/octavia:/var/log/octavia:z
    - /run/octavia:/run/octavia:shared,z
  placement_api_db_sync:
    detach: false
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
      TRIPLEO_DEPLOY_IDENTIFIER: '1657008430'
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-placement-api:current-tripleo
    net: host
    start_order: 1
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/placement:/var/log/placement:z
    - /var/log/containers/httpd/placement:/var/log/httpd:z
    - /var/lib/kolla/config_files/placement_api_db_sync.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/placement:/var/lib/kolla/config_files/src:ro
  swift_copy_rings:
    command:
    - /bin/bash
    - -c
    - cp -v -dR --preserve -t /etc/swift /swift_ringbuilder/etc/swift/*.gz /swift_ringbuilder/etc/swift/*.builder
      /swift_ringbuilder/etc/swift/backups
    detach: false
    environment:
      TRIPLEO_DEPLOY_IDENTIFIER: '1657008430'
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-swift-proxy-server:current-tripleo
    net: none
    user: root
    volumes:
    - /var/lib/config-data/puppet-generated/swift/etc/swift:/etc/swift:rw,z
    - /var/lib/config-data/puppet-generated/swift_ringbuilder:/swift_ringbuilder:ro
  swift_setup_srv:
    command:
    - chown
    - -R
    - 'swift:'
    - /srv/node
    environment:
      TRIPLEO_DEPLOY_IDENTIFIER: '1657008430'
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-swift-account:current-tripleo
    net: none
    user: root
    volumes:
    - /srv/node:/srv/node:z
step_4:
  cinder_api:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-cinder-api:current-tripleo
    net: host
    privileged: false
    restart: always
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/config-data/puppet-generated/cinder:/var/lib/kolla/config_files/src:ro
    - /var/log/containers/cinder:/var/log/cinder:z
    - /var/lib/kolla/config_files/cinder_api.json:/var/lib/kolla/config_files/config.json:ro
    - /var/log/containers/httpd/cinder-api:/var/log/httpd:z
  cinder_api_cron:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /usr/share/openstack-tripleo-common/healthcheck/cron cinder
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-cinder-api:current-tripleo
    net: host
    privileged: false
    restart: always
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/cinder_api_cron.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/cinder:/var/lib/kolla/config_files/src:ro
    - /var/log/containers/cinder:/var/log/cinder:z
    - /var/log/containers/httpd/cinder-api:/var/log/httpd:z
  cinder_scheduler:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck 5672
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-cinder-scheduler:current-tripleo
    net: host
    privileged: false
    restart: always
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/config-data/puppet-generated/cinder:/var/lib/kolla/config_files/src:ro
    - /var/log/containers/cinder:/var/log/cinder:z
    - /var/lib/kolla/config_files/cinder_scheduler.json:/var/lib/kolla/config_files/config.json:ro
  configure_cms_options:
    command:
    - /bin/bash
    - -c
    - CMS_OPTS=$(hiera ovn::controller::ovn_cms_options -c /etc/puppet/hiera.yaml);  if
      [ X"$CMS_OPTS" !=  X ]; then ovs-vsctl set open . external_ids:ovn-cms-options=$CMS_OPTS;else
      ovs-vsctl remove open . external_ids ovn-cms-options; fi
    detach: false
    environment:
      TRIPLEO_DEPLOY_IDENTIFIER: '1657008430'
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-ovn-controller:current-tripleo
    net: host
    privileged: true
    start_order: 0
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /lib/modules:/lib/modules:ro
    - /run/openvswitch:/run/openvswitch:shared,z
  glance_api:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-glance-api:current-tripleo
    net: host
    privileged: false
    restart: always
    start_order: 2
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/glance:/var/log/glance:z
    - /var/log/containers/httpd/glance:/var/log/httpd:z
    - /var/lib/kolla/config_files/glance_api.json:/var/lib/kolla/config_files/config.json
    - /var/lib/config-data/puppet-generated/glance_api:/var/lib/kolla/config_files/src:ro
    - /var/lib/tripleo-config/ceph:/var/lib/kolla/config_files/src-ceph:ro
    - /var/lib/config-data/puppet-generated/iscsid/etc/iscsi:/var/lib/kolla/config_files/src-iscsid:ro
    - /var/lib/glance:/var/lib/glance:slave
  glance_api_cron:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /usr/share/openstack-tripleo-common/healthcheck/cron glance
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-glance-api:current-tripleo
    net: host
    privileged: false
    restart: always
    start_order: 2
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/glance:/var/log/glance:z
    - /var/log/containers/httpd/glance:/var/log/httpd:z
    - /var/lib/kolla/config_files/glance_api_cron.json:/var/lib/kolla/config_files/config.json
    - /var/lib/config-data/puppet-generated/glance_api:/var/lib/kolla/config_files/src:ro
  heat_api:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-heat-api:current-tripleo
    net: host
    privileged: false
    restart: always
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/heat:/var/log/heat:z
    - /var/log/containers/httpd/heat-api:/var/log/httpd:z
    - /var/lib/kolla/config_files/heat_api.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/heat_api:/var/lib/kolla/config_files/src:ro
  heat_api_cfn:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-heat-api-cfn:current-tripleo
    net: host
    privileged: false
    restart: always
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/heat:/var/log/heat:z
    - /var/log/containers/httpd/heat-api-cfn:/var/log/httpd:z
    - /var/lib/kolla/config_files/heat_api_cfn.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/heat_api_cfn:/var/lib/kolla/config_files/src:ro
  heat_api_cron:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /usr/share/openstack-tripleo-common/healthcheck/cron heat
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-heat-api:current-tripleo
    net: host
    privileged: false
    restart: always
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/heat:/var/log/heat:z
    - /var/log/containers/httpd/heat-api:/var/log/httpd:z
    - /var/lib/kolla/config_files/heat_api_cron.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/heat_api:/var/lib/kolla/config_files/src:ro
  heat_engine:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck 5672
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-heat-engine:current-tripleo
    net: host
    privileged: false
    restart: always
    stop_grace_period: 60
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/heat:/var/log/heat:z
    - /var/lib/kolla/config_files/heat_engine.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/heat:/var/lib/kolla/config_files/src:ro
  keystone_refresh:
    action: exec
    command:
    - keystone
    - pkill
    - --signal
    - USR1
    - httpd
    start_order: 1
    user: root
  logrotate_crond:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /usr/share/openstack-tripleo-common/healthcheck/cron
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-cron:current-tripleo
    net: none
    pid: host
    privileged: true
    restart: always
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/logrotate-crond.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/crond:/var/lib/kolla/config_files/src:ro
    - /var/log/containers:/var/log/containers:z
  neutron_api:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-neutron-server:current-tripleo
    net: host
    privileged: false
    restart: always
    start_order: 0
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/neutron:/var/log/neutron:z
    - /var/log/containers/httpd/neutron-api:/var/log/httpd:z
    - /var/lib/kolla/config_files/neutron_api.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/neutron:/var/lib/kolla/config_files/src:ro
  nova_api:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-nova-api:current-tripleo
    net: host
    privileged: false
    restart: always
    start_order: 2
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/nova:/var/log/nova:z
    - /var/log/containers/httpd/nova-api:/var/log/httpd:z
    - /var/lib/kolla/config_files/nova_api.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/nova:/var/lib/kolla/config_files/src:ro
  nova_api_cron:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /usr/share/openstack-tripleo-common/healthcheck/cron nova
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-nova-api:current-tripleo
    net: host
    privileged: false
    restart: always
    start_order: 4
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/nova:/var/log/nova:z
    - /var/log/containers/httpd/nova-api:/var/log/httpd:z
    - /var/lib/kolla/config_files/nova_api_cron.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/nova:/var/lib/kolla/config_files/src:ro
  nova_conductor:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck 5672
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-nova-conductor:current-tripleo
    net: host
    privileged: false
    restart: always
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/nova:/var/log/nova
    - /var/lib/kolla/config_files/nova_conductor.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/nova:/var/lib/kolla/config_files/src:ro
  nova_metadata:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-nova-api:current-tripleo
    net: host
    restart: always
    start_order: 2
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/nova:/var/log/nova:z
    - /var/log/containers/httpd/nova-metadata:/var/log/httpd:z
    - /var/lib/kolla/config_files/nova_metadata.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/nova_metadata:/var/lib/kolla/config_files/src:ro
  nova_migration_target:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-nova-compute:current-tripleo
    net: host
    privileged: true
    restart: always
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/nova-migration-target.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/nova_libvirt:/var/lib/kolla/config_files/src:ro
    - /etc/ssh:/host-ssh:ro
    - /run/libvirt:/run/libvirt:shared,z
    - /var/lib/nova:/var/lib/nova:shared
  nova_scheduler:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck 5672
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-nova-scheduler:current-tripleo
    net: host
    privileged: false
    restart: always
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/nova:/var/log/nova
    - /var/lib/kolla/config_files/nova_scheduler.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/nova:/var/lib/kolla/config_files/src:ro
  nova_vnc_proxy:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-nova-novncproxy:current-tripleo
    net: host
    privileged: false
    restart: always
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/nova:/var/log/nova
    - /var/lib/kolla/config_files/nova_vnc_proxy.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/nova:/var/lib/kolla/config_files/src:ro
  nova_wait_for_api_service:
    detach: false
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
      __OS_DEBUG: 'false'
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-nova-api:current-tripleo
    net: host
    privileged: false
    start_order: 3
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/nova:/var/log/nova:z
    - /var/log/containers/httpd/nova-api:/var/log/httpd:z
    - /var/lib/kolla/config_files/nova_wait_for_api_service.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/nova:/var/lib/kolla/config_files/src:ro
    - /var/lib/container-config-scripts:/container-config-scripts:z
  octavia_api:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-octavia-api:current-tripleo
    net: host
    privileged: false
    restart: always
    start_order: 2
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/octavia_api.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/octavia:/var/lib/kolla/config_files/src:ro
    - /var/log/containers/octavia:/var/log/octavia:z
    - /run/octavia:/run/octavia:shared,z
    - /var/log/containers/httpd/octavia-api:/var/log/httpd:z
  octavia_driver_agent:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-octavia-api:current-tripleo
    net: host
    privileged: true
    restart: always
    start_order: 2
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/octavia_driver_agent.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/octavia:/var/lib/kolla/config_files/src:ro
    - /var/log/containers/octavia:/var/log/octavia:z
    - /run/octavia:/run/octavia:shared,z
  ovn_controller:
    depends_on:
    - openvswitch.service
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck 6642
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-ovn-controller:current-tripleo
    net: host
    privileged: true
    restart: always
    start_order: 1
    user: root
    volumes:
    - /var/lib/kolla/config_files/ovn_controller.json:/var/lib/kolla/config_files/config.json:ro
    - /lib/modules:/lib/modules:ro
    - /run:/run
    - /var/lib/openvswitch/ovn:/run/ovn:shared,z
    - /var/log/containers/openvswitch:/var/log/openvswitch:z
    - /var/log/containers/openvswitch:/var/log/ovn:z
  ovn_metadata_agent:
    cgroupns: host
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-neutron-metadata-agent-ovn:current-tripleo
    net: host
    pid: host
    privileged: true
    restart: always
    start_order: 1
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/neutron:/var/log/neutron:z
    - /var/lib/kolla/config_files/ovn_metadata_agent.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/neutron:/var/lib/kolla/config_files/src:ro
    - /lib/modules:/lib/modules:ro
    - /run/openvswitch:/run/openvswitch:shared,z
    - /var/lib/neutron:/var/lib/neutron:shared,z
    - /run/netns:/run/netns:shared
    - /var/lib/neutron/kill_scripts:/etc/neutron/kill_scripts:shared,z
    - /var/lib/neutron/ovn_metadata_haproxy_wrapper:/usr/local/bin/haproxy:ro
  placement_api:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-placement-api:current-tripleo
    net: host
    restart: always
    start_order: 1
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/placement:/var/log/placement:z
    - /var/log/containers/httpd/placement:/var/log/httpd:z
    - /var/lib/kolla/config_files/placement_api.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/placement:/var/lib/kolla/config_files/src:ro
  placement_wait_for_service:
    detach: false
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
      __OS_DEBUG: 'false'
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-placement-api:current-tripleo
    net: host
    privileged: false
    start_order: 2
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/placement:/var/log/placement:z
    - /var/log/containers/httpd/placement:/var/log/httpd:z
    - /var/lib/kolla/config_files/placement_api_wait_for_service.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/placement:/var/lib/kolla/config_files/src:ro
    - /var/lib/container-config-scripts:/container-config-scripts:z
  setup_ovs_manager:
    command:
    - /container_puppet_apply.sh
    - '4'
    - exec
    - include tripleo::profile::base::neutron::ovn_metadata
    detach: false
    environment:
      TRIPLEO_DEPLOY_IDENTIFIER: '1657008430'
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-neutron-metadata-agent-ovn:current-tripleo
    net: host
    privileged: true
    start_order: 0
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /var/lib/container-config-scripts/container_puppet_apply.sh:/container_puppet_apply.sh:ro
    - /etc/puppet:/tmp/puppet-etc:ro
    - /usr/share/openstack-puppet/modules:/usr/share/openstack-puppet/modules:ro
    - /lib/modules:/lib/modules:ro
    - /run/openvswitch:/run/openvswitch:shared,z
  swift_account_auditor:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-swift-account:current-tripleo
    net: host
    restart: always
    user: swift
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/swift_account_auditor.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/swift:/var/lib/kolla/config_files/src:ro
    - /srv/node:/srv/node
    - /dev:/dev
    - /var/cache/swift:/var/cache/swift:z
    - /var/log/containers/swift:/var/log/swift:z
  swift_account_reaper:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-swift-account:current-tripleo
    net: host
    restart: always
    user: swift
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/swift_account_reaper.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/swift:/var/lib/kolla/config_files/src:ro
    - /srv/node:/srv/node
    - /dev:/dev
    - /var/cache/swift:/var/cache/swift:z
    - /var/log/containers/swift:/var/log/swift:z
  swift_account_replicator:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-swift-account:current-tripleo
    net: host
    restart: always
    user: swift
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/swift_account_replicator.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/swift:/var/lib/kolla/config_files/src:ro
    - /srv/node:/srv/node
    - /dev:/dev
    - /var/cache/swift:/var/cache/swift
    - /var/log/containers/swift:/var/log/swift:z
  swift_account_server:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-swift-account:current-tripleo
    net: host
    restart: always
    user: swift
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/swift_account_server.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/swift:/var/lib/kolla/config_files/src:ro
    - /srv/node:/srv/node
    - /dev:/dev
    - /var/cache/swift:/var/cache/swift
    - /var/log/containers/swift:/var/log/swift:z
  swift_container_auditor:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-swift-container:current-tripleo
    net: host
    restart: always
    user: swift
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/swift_container_auditor.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/swift:/var/lib/kolla/config_files/src:ro
    - /srv/node:/srv/node
    - /dev:/dev
    - /var/cache/swift:/var/cache/swift
    - /var/log/containers/swift:/var/log/swift:z
  swift_container_replicator:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-swift-container:current-tripleo
    net: host
    restart: always
    user: swift
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/swift_container_replicator.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/swift:/var/lib/kolla/config_files/src:ro
    - /srv/node:/srv/node
    - /dev:/dev
    - /var/cache/swift:/var/cache/swift
    - /var/log/containers/swift:/var/log/swift:z
  swift_container_server:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-swift-container:current-tripleo
    net: host
    restart: always
    user: swift
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/swift_container_server.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/swift:/var/lib/kolla/config_files/src:ro
    - /srv/node:/srv/node
    - /dev:/dev
    - /var/cache/swift:/var/cache/swift
    - /var/log/containers/swift:/var/log/swift:z
  swift_container_updater:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-swift-container:current-tripleo
    net: host
    restart: always
    user: swift
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/swift_container_updater.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/swift:/var/lib/kolla/config_files/src:ro
    - /srv/node:/srv/node
    - /dev:/dev
    - /var/cache/swift:/var/cache/swift
    - /var/log/containers/swift:/var/log/swift:z
  swift_object_auditor:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-swift-object:current-tripleo
    net: host
    restart: always
    user: swift
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/swift_object_auditor.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/swift:/var/lib/kolla/config_files/src:ro
    - /srv/node:/srv/node
    - /dev:/dev
    - /var/cache/swift:/var/cache/swift
    - /var/log/containers/swift:/var/log/swift:z
  swift_object_expirer:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-swift-proxy-server:current-tripleo
    net: host
    restart: always
    user: swift
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/swift_object_expirer.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/swift:/var/lib/kolla/config_files/src:ro
    - /srv/node:/srv/node
    - /dev:/dev
    - /var/cache/swift:/var/cache/swift
    - /var/log/containers/swift:/var/log/swift:z
  swift_object_replicator:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-swift-object:current-tripleo
    net: host
    restart: always
    user: swift
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/swift_object_replicator.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/swift:/var/lib/kolla/config_files/src:ro
    - /srv/node:/srv/node
    - /dev:/dev
    - /var/cache/swift:/var/cache/swift
    - /var/log/containers/swift:/var/log/swift:z
  swift_object_server:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-swift-object:current-tripleo
    net: host
    restart: always
    user: swift
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/swift_object_server.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/swift:/var/lib/kolla/config_files/src:ro
    - /srv/node:/srv/node
    - /dev:/dev
    - /var/cache/swift:/var/cache/swift
    - /var/log/containers/swift:/var/log/swift:z
  swift_object_updater:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-swift-object:current-tripleo
    net: host
    restart: always
    user: swift
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/swift_object_updater.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/swift:/var/lib/kolla/config_files/src:ro
    - /srv/node:/srv/node
    - /dev:/dev
    - /var/cache/swift:/var/cache/swift
    - /var/log/containers/swift:/var/log/swift:z
  swift_proxy:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-swift-proxy-server:current-tripleo
    net: host
    restart: always
    start_order: 2
    user: swift
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/swift_proxy.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/swift:/var/lib/kolla/config_files/src:ro
    - /srv/node:/srv/node
    - /dev:/dev
    - /var/log/containers/swift:/var/log/swift:z
  swift_recon_cron:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /usr/share/openstack-tripleo-common/healthcheck/cron swift
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-swift-object:current-tripleo
    net: host
    privileged: false
    restart: always
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/swift_recon_cron.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/swift:/var/lib/kolla/config_files/src:ro
    - /srv/node:/srv/node
    - /dev:/dev
    - /var/cache/swift:/var/cache/swift
    - /var/log/containers/swift:/var/log/swift:z
  swift_rsync:
    cap_add:
    - NET_BIND_SERVICE
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-swift-object:current-tripleo
    net: host
    privileged: false
    restart: always
    user: root
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/swift_rsync.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/swift:/var/lib/kolla/config_files/src:ro
    - /srv/node:/srv/node
    - /dev:/dev
    - /var/log/containers/swift:/var/log/swift:z
step_5:
  nova_compute:
    depends_on:
    - tripleo_nova_libvirt.target
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
      LIBGUESTFS_BACKEND: direct
    healthcheck:
      test: /openstack/healthcheck 5672
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-nova-compute:current-tripleo
    ipc: host
    net: host
    privileged: true
    restart: always
    start_order: 3
    ulimit:
    - nofile=131072
    - memlock=67108864
    user: nova
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/log/containers/nova:/var/log/nova
    - /etc/ssh/ssh_known_hosts:/etc/ssh/ssh_known_hosts:ro
    - /var/lib/kolla/config_files/nova_compute.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/nova_libvirt:/var/lib/kolla/config_files/src:ro
    - /var/lib/config-data/puppet-generated/iscsid/etc/iscsi:/var/lib/kolla/config_files/src-iscsid:ro
    - /var/lib/tripleo-config/ceph:/var/lib/kolla/config_files/src-ceph:ro
    - /dev:/dev
    - /lib/modules:/lib/modules:ro
    - /run:/run
    - /var/lib/iscsi:/var/lib/iscsi:z
    - /var/lib/libvirt:/var/lib/libvirt:shared
    - /sys/class/net:/sys/class/net
    - /sys/bus/pci:/sys/bus/pci
    - /boot:/boot:ro
    - /var/lib/nova:/var/lib/nova:shared
  octavia_health_manager:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-octavia-health-manager:current-tripleo
    net: host
    privileged: false
    restart: always
    start_order: 2
    stop_grace_period: 630
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/octavia_health_manager.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/octavia:/var/lib/kolla/config_files/src:ro
    - /var/log/containers/octavia:/var/log/octavia:z
  octavia_housekeeping:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-octavia-housekeeping:current-tripleo
    net: host
    privileged: false
    restart: always
    start_order: 2
    stop_grace_period: 630
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/octavia_housekeeping.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/octavia:/var/lib/kolla/config_files/src:ro
    - /var/log/containers/octavia:/var/log/octavia:z
  octavia_rsyslog:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-rsyslog:current-tripleo
    net: host
    privileged: false
    restart: always
    start_order: 2
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/octavia_rsyslog.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/octavia:/var/lib/kolla/config_files/src:ro
    - /var/log/containers/octavia-amphorae:/var/log/octavia:z
  octavia_worker:
    environment:
      KOLLA_CONFIG_STRATEGY: COPY_ALWAYS
    healthcheck:
      test: /openstack/healthcheck 5672
    image: tripleo-director.ctlplane.localdomain:8787/tripleomastercentos9/openstack-octavia-worker:current-tripleo
    net: host
    privileged: false
    restart: always
    start_order: 2
    stop_grace_period: 630
    volumes:
    - /etc/hosts:/etc/hosts:ro
    - /etc/localtime:/etc/localtime:ro
    - /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro
    - /etc/pki/ca-trust/source/anchors:/etc/pki/ca-trust/source/anchors:ro
    - /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro
    - /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro
    - /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro
    - /dev/log:/dev/log
    - /etc/puppet:/etc/puppet:ro
    - /var/lib/kolla/config_files/octavia_worker.json:/var/lib/kolla/config_files/config.json:ro
    - /var/lib/config-data/puppet-generated/octavia:/var/lib/kolla/config_files/src:ro
    - /var/log/containers/octavia:/var/log/octavia:z
