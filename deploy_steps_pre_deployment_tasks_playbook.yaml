- hosts: Standalone:overcloud
  strategy: tripleo_free
  name: Pre Deployment Step Tasks
  become: true
  gather_facts: "{{ gather_facts | default(false) }}"
  any_errors_fatal: true
  vars:
    bootstrap_server_id: 750082a3-3dbe-4578-bb63-119258732e9d
    deploy_identifier: 1657092239
    enable_debug: False
    enable_puppet: True
    container_cli: podman
    container_log_stdout_path: /var/log/containers/stdouts
    container_healthcheck_disabled: False
    docker_puppet_debug: False
    docker_puppet_process_count: 6
    docker_puppet_mount_host_puppet: True
  tasks:
    - name: Pre Deployment Step Tasks
      delegate_to: localhost
      run_once: true
      debug:
        msg: Use --start-at-task 'Pre Deployment Step Tasks' to resume from this task
    - name: Standalone Pre Deployment Step Tasks block
      include_tasks: Standalone/pre_deploy_step_tasks.yaml
      when:
        - tripleo_role_name == 'Standalone'
        - playbook_dir ~ '/Standalone/pre_deploy_step_tasks.yaml' is exists
    - name: Compute Pre Deployment Step Tasks block
      include_tasks: Compute/pre_deploy_step_tasks.yaml
      when:
        - tripleo_role_name == 'Compute'
        - playbook_dir ~ '/Compute/pre_deploy_step_tasks.yaml' is exists
  tags:
    - overcloud
    - pre_deploy_steps_tasks
